---
budget:
  income:
    monthIncome: 405
    bonusIncome: 60
  expense:
    fixedExpense: 50
    debt: 200
    savings: 26
    livingExpense:
      cash: 17
      card: 113
    monthlyPayment: 38.6222
datetime:
  startDay: 2024-07-01
  endDay: 2024-07-31
spent:
  - no: 9
    item: 다지기, 엔진오일
    cost: 13033
    shop: 네이버페이
    date: 2024.7.23.
    remark: 할부(7,8,9,10)
    class: NHCard
  - no: 8
    item: 블루라벨 용띠
    cost: 97000
    shop: 이마트진접점
    date: 2024.7.20.
    remark: 할부(7,8,9,10)
    class: NHCard
  - item: 아파트세
    cost: 48500
    shop: 수원시
    date: 2024.7.16.
    no: 7
    remark: 할부(7,8,9)
    class: NHCard
  - item: 지방세
    cost: 50180
    shop: 경기도
    date: 20204.7.4.
    no: 6
    remark: 할부(7,8,9,10)
    class: NHCard
  - no: 5
    item: 정수기
    cost: 92000
    shop: 삼성전자몰
    date: 2024.5.14.
    remark: 할부(5,6,7,8,9,10,11,12,1,2)
    class: NHCard
  - no: 4
    date: 2024.4.27.
    item: 유류비
    cost: 18219
    shop: 서진주유소향남
    remark: 할부(4,5,6,7,8)
    class: NHCard
  - item: 약
    cost: 27147
    shop: 우리약국
    date: 2024.4.26.
    no: 3
    remark: 할부(4 5,6,7,8)
    class: NHCard
  - no: 2
    item: 유류비
    cost: 18219
    shop: 향남주유소
    date: 2024.04.14.
    remark: 할부(4,5,6,7,8)
    class: NHCard
  - shop: 광교아웃렛 할부
    cost: 23948
    item: 옷
    date: 2024.4.10.
    no: 1
    remark: 할부(4,5,6,7,8월)
    class: NHCard
    
---

#예산관리 
## 1. 예산

```dataviewjs
dv.header(3,"수입");

// 1. 현재노트 로드
const curr=dv.current();

// 2. 프론트매터 로드
const currProps=curr.file.frontmatter;

// 3. 버짓로드
const currBudget=currProps.budget;

const monthIncome=currBudget.income.monthIncome;
const bonusIncome=currBudget.income.bonusIncome;
const sumIncome=monthIncome+bonusIncome;
dv.table(
	["월급여","보너스","총수입"],
	[
		[`${monthIncome}`,`${bonusIncome}`,`${sumIncome}`]
	]
);
const debt=currBudget.expense.debt;

const fixedExpense=currBudget.expense.fixedExpense;

const savings=currBudget.expense.savings;

const fixedExpenseSum=debt+fixedExpense+savings;
dv.header(3,"고정지출")
dv.table(
	["원리금","고정지출","저축","합계"],
	[
		[`${debt}`,`${fixedExpense}`,`${savings}`,`${fixedExpenseSum}`]
	]
);

const cash =currBudget.expense.livingExpense.cash;

const card=currBudget.expense.livingExpense.card;

const pureLiving=cash+card;

// 테이블 랜더링
dv.header(3,"순생활비");
dv.table(
	["순생활비","카드값","현금"],
	[
		[`${pureLiving}`,`${card}`,`${cash}`]
	]
);
```

## 2. 지출
```dataviewjs
// 1. 현재노트 로드
const curr=dv.current();

// 2. 프론트매터 로드
const currProps=curr.file.frontmatter;

// 3. 버짓로드
const currBudget=currProps.budget;

const cash =currBudget.expense.livingExpense.cash;

const card=currBudget.expense.livingExpense.card;

const pureLiving=cash+card

const currSpent=curr.spent;
const date=currSpent.date;
const day=moment(date).format('M-DD dd');
const cardPay=currSpent.filter(
	(item)=>(item.class=="NHCard")
);
let cardTotal=0;
cardPay.forEach(
	item=>{cardTotal=cardTotal+item.cost}
);
const cardBudget=card*10000;
const cardRest=cardBudget-cardTotal;

dv.span(`
#### 카드값 현황
	- 책정: ${cardBudget}
	- 누계: ${cardTotal}
	- 잔여: ${cardRest}
`);
dv.span("#### 세부 지출내역");
currSpent.map(
	(spent)=>dv.span(`
	No: ${spent.no}
	날짜: ${spent.date}
	사용처: ${spent.shop}
	항목: ${spent.item}
	가격: ${spent.cost}
	결재수단: ${spent.class}
	비고: ${spent.remark} \n
	`)
);
//dv.span(currSpent);
```
