---
budget:
  income:
    monthIncome: 406
    bonusIncome: 60
    carriedIncome: 0
    additionalIncome: 6
  expense:
    fixedExpense: 50
    debt: 200
    savings: 26
    livingExpense:
      cash: 0
      card: 97
      swPay: 33
    monthlyPayment: 38.6222
datetime:
  startDay: 2024-08-01
  endDay: 2024-08-31
  month: 8
spent:
  - item: ì‚¼ê°ê¹€ë°¥
    cost: 1600
    shop: ì„¸ë¸ì¼ë ˆë¸í™”ì„±
    date: 2024.8.5.
    remark: "-"
    class: ìƒí™œë¹„
    payment: NHCard
  - item: ìœ ë¥˜ë¹„
    cost: 100000
    shop: ì‹ í™”ì„±ì£¼ìœ ì†Œ
    date: 2024.8.4.
    remark: "-"
    class: ê³ ì •ì§€ì¶œ
    payment: NHCard
  - item: ëƒ‰ë©´
    cost: 31000
    shop: ëƒ‰ë©´ìž¥ì¸ ìž„ì‚¬ë¶€ ë§¤íƒ„ì 
    date: 2024.8.3.
    remark: ë°°ë‹¬íŠ¹ê¸‰
    class: ìƒí™œë¹„
    payment: SuwonPay
  - item: ìº”ì»¤í”¼
    cost: 1980
    shop: í•˜ëª¨ë‹ˆë§ˆíŠ¸
    class: ìƒí™œë¹„
    date: 2024.8.3.
    remark: "-"
    payment: SuwonPay
  - class: ìƒí™œë¹„
    cost: 4900
    item: ë¹µ
    shop: ë¹ ë°”
    date: 2024.8.3.
    remark: "-"
    payment: SuwonPay
  - class: ìƒí™œë¹„
    cost: 6310
    item: ë°”ë‹ë¼ë¼ë–¼,ìŠˆí¬ë¦¼ë¹µ
    shop: ë©”ê°€ì»¤í”¼ìš°ë§Œì 
    date: 2024.8.3.
    remark: "-"
    payment: NHCard
  - class: ìƒí™œë¹„
    remark: "-"
    cost: 5000
    item: ë„ì‹œë½
    shop: ì”¨ìœ í™”ì„±
    date: 2024.8.2
    payment: NHCard
  - item: ì¸ì£¼
    cost: 1000
    shop: ë‹¤ì´ì†Œ ì•„ì£¼ëŒ€ì 
    date: 2024.8.1.
    remark: "-"
    class: ìƒí™œë¹„
    payment: NHCard
  - item: ë‹¤ì§€ê¸°, ì—”ì§„ì˜¤ì¼
    cost: 13033
    shop: ë„¤ì´ë²„íŽ˜ì´
    date: 2024.7.23.
    remark: í• ë¶€(7,8,9,10)
    class: ìƒí™œë¹„
    payment: NHCard
  - item: ë¸”ë£¨ë¼ë²¨ ìš©ë 
    cost: 97000
    shop: ì´ë§ˆíŠ¸ì§„ì ‘ì 
    date: 2024.7.20.
    remark: í• ë¶€(7,8,9,10)
    class: ìƒí™œë¹„
    payment: NHCard
  - item: ì•„íŒŒíŠ¸ì„¸
    cost: 48500
    shop: ìˆ˜ì›ì‹œ
    date: 2024.7.16.
    remark: í• ë¶€(7,8,9)
    class: ìƒí™œë¹„
    payment: NHCard
  - item: ì§€ë°©ì„¸
    cost: 50180
    shop: ê²½ê¸°ë„
    date: 20204.7.4.
    remark: í• ë¶€(7,8,9,10)
    class: ìƒí™œë¹„
    payment: NHCard
  - item: ì •ìˆ˜ê¸°
    cost: 92000
    shop: ì‚¼ì„±ì „ìžëª°
    date: 2024.5.14.
    remark: í• ë¶€(5,6,7,8,9,10,11,12,1,2)
    class: ìƒí™œë¹„
    payment: NHCard
  - date: 2024.4.20
    item: ìœ ë¥˜ë¹„
    cost: 18219
    shop: ì„œì§„ì£¼ìœ ì†Œí–¥ë‚¨
    remark: í• ë¶€(4,5,6,7,8)
    class: ìƒí™œë¹„
    payment: NHCard
  - item: ì•½
    cost: 27147
    shop: ìš°ë¦¬ì•½êµ­
    date: 2024.4.26.
    remark: í• ë¶€(4 5,6,7,8)
    class: ìƒí™œë¹„
    payment: NHCard
  - item: ìœ ë¥˜ë¹„
    cost: 18219
    shop: í–¥ë‚¨ì£¼ìœ ì†Œ
    date: 2024.04.14.
    remark: í• ë¶€(4,5,6,7,8)
    class: ìƒí™œë¹„
    payment: NHCard
  - shop: ê´‘êµì•„ì›ƒë › í• ë¶€
    cost: 23948
    item: ì˜·
    date: 2024.4.10.
    remark: í• ë¶€(4,5,6,7,8ì›”)
    class: ìƒí™œë¹„
    payment: NHCard
---

#ì˜ˆì‚°ê´€ë¦¬ 
## 1. ì˜ˆì‚°

```dataviewjs
// 1. í˜„ìž¬ë…¸íŠ¸ ë¡œë“œ
const curr=dv.current();

// 2. í”„ë¡ íŠ¸ë§¤í„° ë¡œë“œ
const currProps=curr.file.frontmatter;

// 3. ë²„ì§“ë¡œë“œ
const currBudget=currProps.budget;

const monthIncome=currBudget.income.monthIncome;
const bonusIncome=currBudget.income.bonusIncome;
const carriedIncome=currBudget.income.carriedIncome;

const additionalIncome=currBudget.income.additionalIncome;

const sumIncome=monthIncome+bonusIncome+additionalIncome;

dv.span(`
#### ðŸ˜„ìˆ˜ìž…: ${sumIncome}
	- ë‹¹ì›”ê¸‰ì—¬: ${monthIncome}
	- ì„±ê³¼ê¸‰ì—¬: ${bonusIncome}
	- ì¶”ê°€ìˆ˜ìž…: ${additionalIncome}
	- ì´ì›”ìˆ˜ìž…: ${carriedIncome}
`);
const debt=currBudget.expense.debt;

const fixedExpense=currBudget.expense.fixedExpense;

const savings=currBudget.expense.savings;

const fixedExpenseSum=debt+fixedExpense+savings;

dv.span(`
#### ðŸ¦ê³ ì •ì§€ì¶œ: ${fixedExpenseSum}
	- ì›”ì›ë¦¬ê¸ˆ: ${debt}
	- ê³ ì •ì§€ì¶œ: ${fixedExpense}
	- ë³´í—˜ì €ì¶•: ${savings}
`);

const cash =currBudget.expense.livingExpense.cash;

const swPay=currBudget.expense.livingExpense.swPay;

const card=currBudget.expense.livingExpense.card;

const pureLiving=card+cash+swPay;

const extraIncome=sumIncome-fixedExpenseSum-card-cash-swPay;

// í…Œì´ë¸” ëžœë”ë§
dv.span(`
#### ðŸ›’ìˆœìƒí™œë¹„: ${pureLiving}+@(${extraIncome})
	- ì‹ ìš©ì¹´ë“œ: ${card}
	- ìˆ˜ì›íŽ˜ì´: ${swPay}
	- í˜„ê¸ˆì‚¬ìš©: ${cash}
	- ì—¬ìœ ê¸ˆì•¡: ${extraIncome}\n
`);

```

## 2. ì§€ì¶œ
```dataviewjs
const FIXEDEXPENSE="ê³ ì •ì§€ì¶œ";
// 1. í˜„ìž¬ë…¸íŠ¸ ë¡œë“œ
const curr=dv.current();

// 2. í”„ë¡ íŠ¸ë§¤í„° ë¡œë“œ
const currProps=curr.file.frontmatter;

// 3. ë²„ì§“ë¡œë“œ
const currBudget=currProps.budget;

const swPy =currBudget.expense.livingExpense.swPay;

const card=currBudget.expense.livingExpense.card;

const fixed=currBudget.expense.fixedExpense;

//dv.span(fixed);

const pureLiving=swPy+card;

const currSpent=curr.spent;
const date=currSpent.date;
//const day=moment(date).format('M-DD dd');

const fixedExpense=currSpent.filter(
(item)=>(
item.class==FIXEDEXPENSE
)
);

let fixedExpenseTotal=0;

fixedExpense.forEach(
(item)=>{
fixedExpenseTotal+=item.cost
}
);

const fixedExpenseCard=fixedExpense.filter(
(item)=>(item.payment=="NHCard")
);

let fixedExpenseCardTotal=0;

fixedExpenseCard.forEach(
(item)=>{
fixedExpenseCardTotal+=item.cost;
}
);

const fixedExpenseCashTotal=fixedExpenseTotal-fixedExpenseCardTotal;

//dv.span(fixedExpenseCashTotal);

const cardPay=currSpent.filter(
	(item)=>(item.payment=="NHCard")
);
let cardTotal=0;
cardPay.forEach(
	item=>{cardTotal=cardTotal+item.cost}
);
cardTotal-=fixedExpenseCardTotal;
const cardBudget=card*10000;
const cardRest=cardBudget-cardTotal;
const swPayBudget=swPy*10000;
const fixedBudget=fixed*10000;

let swPayTotal=0;
const swPay=currSpent.filter(
	item=>item.payment=="SuwonPay"
);
swPay.forEach(
	item=>{
	swPayTotal=swPayTotal+item.cost
	}
);
const swPayRest=swPayBudget-swPayTotal;

// ë‚ ì§œ ê³„ì‚°

const monthData=currProps.datetime.month;
//dv.span(monthData);
const today=new Date();
const month=today.getMonth();
const monthIdx=month%12;
const day=today.getDate();
const monthDay=[31,28,31,30,31,30,31,31,30,31,30,31];
const restDay=(monthData==monthIdx+1)?(monthDay[monthIdx]-day+1):monthDay[monthData-1];

const dailyCardSpent=(cardRest-cardRest%restDay)/restDay;

const dailySwSpent=(swPayRest-swPayRest%restDay)/restDay;

const dailySpent=dailyCardSpent+dailySwSpent;

const fixedRest=fixedBudget-fixedExpenseTotal;

// ìžë¦¬ìˆ˜ ë§žì¶”ê¸°
const maxNo=6;
const spaceKey="0";
const cardBudgetC=cardBudget.toString().padStart(maxNo,spaceKey);
const cardBudgetCV=cardBudgetC.replace(/\B(?=(\d{3})+(?!\d))/g,",");

const cardTotalCV=cardTotal.toString().padStart(maxNo,spaceKey).replace(/\B(?=(\d{3})+(?!\d))/g,",");

const swPayTotalCV=swPayTotal.toString().padStart(maxNo,spaceKey).replace(/\B(?=(\d{3})+(?!\d))/g,",");

const cardRestCV=cardRest.toString().padStart(maxNo,spaceKey).replace(/\B(?=(\d{3})+(?!\d))/g,",");

const swPayRestCV=swPayRest.toString().padStart(maxNo,spaceKey).replace(/\B(?=(\d{3})+(?!\d))/g,",");


// ê²°ê³¼ë¬¼ ë Œë”ë§
dv.span(`
#### ðŸ“Ší˜„í™© : ì¹´ë“œê°’ | ìˆ˜ì›íŽ˜ì´ | ê³ ì •ì§€ì¶œ
	-ì±…ì •: ${cardBudgetCV} | ${swPayBudget.toLocaleString()} | ${fixedBudget.toLocaleString()}
	-ëˆ„ê³„: ${cardTotalCV} | ${swPayTotalCV} | ${fixedExpenseTotal.toLocaleString()}
	-ìž”ì—¬: ${cardRestCV} | ${swPayRestCV} | ${fixedRest.toLocaleString()}
`)
/*
dv.table(["í˜„í™©","ì¹´ë“œ","ìˆ˜ì›íŽ˜ì´","ê³ ì •ì§€ì¶œ"],[
	["ì±…ì •",`${cardBudget.toLocaleString()}`,`${swPayBudget.toLocaleString()}`,`${fixedBudget.toLocaleString()}`],
	["ëˆ„ê³„",`${cardTotal.toLocaleString()}`,`${swPayTotal.toLocaleString()}`,`${fixedExpenseTotal.toLocaleString()}`],
	["ìž”ì—¬",`${cardRest.toLocaleString()}`,`${swPayRest.toLocaleString()}`,`${fixedRest.toLocaleString()}`]
]
);
*/
dv.header(4,"ðŸ’¼ë‚¨ì€ ì¼ì¼ ìƒí™œë¹„");
dv.span(`
	- ${dailyCardSpent.toLocaleString()} ì›/ì¼(ì‹ ìš©ì¹´ë“œ)Ã—${restDay.toLocaleString()}ì¼
	- ${dailySwSpent.toLocaleString()} ì›/ì¼(ìˆ˜ì›íŽ˜ì´)Ã—${restDay}ì¼
	- ${dailySpent.toLocaleString()} ì›/ì¼(ìˆœìƒí™œë¹„)Ã—${restDay}ì¼
`);
dv.span("#### ðŸ§¾ì„¸ë¶€ ì§€ì¶œë‚´ì—­");
currSpent.map(
	(spent)=>dv.span(`
	No: ${currSpent.length-currSpent.indexOf(spent)}
	ë‚ ì§œ: ${spent.date}
	ì‚¬ìš©ì²˜: ${spent.shop}
	í•­ëª©: ${spent.item}
	ê°€ê²©: ${spent.cost.toLocaleString()}
	ì˜ˆì‚°ê³¼ëª©: ${spent.class}
	ê²°ìž¬ìˆ˜ë‹¨: ${spent.payment}
	ë¹„ê³ : ${spent.remark} \n
	`)
	
);
```
